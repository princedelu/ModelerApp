include ../../menuleft

div(id='contenu')
    h1(data-ng-if="action == 'add'") Ajout d'un quartier
    h1(data-ng-if="action != 'add'") Affichage d'un quartier
    form(ng-submit='add()', name="addForm",role='form')
        div(class='form-group')
            label(for='nom') Nom
            input(type="text", data-ng-model="nom", placeholder="Nom", name="nom", required, data-ng-minlength="1", data-ng-maxlength="20", autofocus,class='form-control app-control')
        div(class='form-group')
            label(for='description') Description
            textarea(rows=4, data-ng-model="description", placeholder="Description", name="description", required, data-ng-minlength="1", data-ng-maxlength="60",class='form-control app-control')
         div(class='form-group')
            label(for='zone') Bloc
            select(data-ng-model="bloc",name="bloc",required,data-ng-options="bloc._id as bloc.nom for bloc in blocs",class='form-control app-control')               
        div(class='form-group')
            input(type="hidden", data-ng-model="_id", id='_id', name="_id")
            button.btn(type="submit", data-ng-disabled="addForm.$invalid") Valider

        .alert.alert-error(ng-show="addForm.$invalid && addForm.$dirty")
            strong Merci de corriger les éléments suivants :
            ul
                li(ng-show="addForm.nom.$error.required") Un nom est requis
                li(ng-show="addForm.nom.$error.$error.minlength") Le  nom doit avoir une longueur minimale de 1
                li(ng-show="addForm.nom.$error.maxlength") Le nom doit avoir une longueur maximum de 20
                li(ng-show="addForm.description.$error.required") Une description est requise
                li(ng-show="addForm.description.$error.$error.minlength") La description doit avoir une longueur minimale de 1
                li(ng-show="addForm.description.$error.maxlength") La description doit avoir une longueur maximum de 60
                li(ng-show="addForm.bloc.$error.required") Un bloc doit être saisi
        div(ng-show="doublon") Merci de saisir un autre nom, celui-ci est déjà utilisé
        
